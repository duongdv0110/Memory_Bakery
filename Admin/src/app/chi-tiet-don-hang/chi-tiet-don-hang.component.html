<h2>Chi tiết đơn hàng {{orderDetail ? orderDetail._id : ''}}</h2>
<hr>
<div class="donhang-container">
  <div class="line"></div>
  <div class="donhang-info-container">
    <div class="donhang-header">
      <div>Sản phẩm</div>
      <div>Đơn giá</div>
      <div>Số lượng</div>
      <div>Thành tiền</div>
    </div>
    <div class="line"></div>
    <div class="cart-product-container">
      <div *ngFor="let or of orderDetail?.Details" class="donhang-product">
        <div class="donhang-info">
          <b>{{or.ProductName}}</b>
        </div>
        <div class="price-info">
          <div class="price">{{convertVND(+or.UnitPrice)}}</div>
        </div>
        <div class="quantity-box">
          {{or.Quantity}}
        </div>
        <div class="price-info">
          <div class="price">
            {{convertVND(+or.UnitPrice * +or.Quantity)}}
          </div>
        </div>
      </div>
    </div>
    <hr>
  </div>
</div>
<div class="container">
  <div class="left">
    <table class="tongtien">
      <tr>
        <td style="text-align: left;">Phương thức thanh toán</td>
        <td style="text-align: right;"><strong>{{orderDetail ? orderDetail.PaymentMethod == 0 ? 'Thanh toán khi nhận hàng' : 'Chuyển khoản' : ''}}</strong></td>
      </tr>
      <tr>
        <td style="text-align: left;">Tổng giá trị sản phẩm</td>
        <td style="text-align: right;"><strong>{{convertVND(sumPriceOfProduct)}}</strong></td>
      </tr>
      <tr>
        <td style="text-align: left;">Phí vận chuyển</td>
        <td style="text-align: right;"><strong>{{convertVND(orderDetail ? +orderDetail.CostShip : 0)}}</strong></td>
      </tr>
      <tr>
        <td style="text-align: left;">Giảm giá</td>
        <td style="text-align: right;"><strong>0 VND</strong></td>
      </tr>
      <tr>
        <td style="text-align: left;">Thành tiền</td>
        <td style="color: red; text-align: right;"><strong>{{total()}}</strong></td>
      </tr>
      <hr style="width: 100%;">
      <tr>
        <td style="text-align: left;">Số tiền đã thanh toán</td>
        <td style="text-align: right;"><strong>{{finalAmountPaid}}</strong></td>
      </tr>
      <tr>
        <td style="text-align: left;"> Số tiền còn nợ </td>
        <td style="text-align: right;"><strong>{{amountOwed}}</strong></td>
      </tr>
    </table>
  </div>
  <div class="right">
    <textarea type="text" disabled [value]="orderDetail ? 'Note: ' + orderDetail.Note : ''"></textarea>
    <div class="btn-container">
      <button class="cancel-button" *ngIf="isShowCancel"
        [swal]="{ title: 'Lý do huỷ đơn hàng: ', input: 'text', showCancelButton: true }"
        (confirm)="changeOrderStatus($event, 'Đã huỷ')" (dismiss)="handleDismiss($event)">
        Huỷ
      </button>
      <button class="button" *ngIf="isShow" (click)="changeOrderStatus(null, curStatusType)">{{curStatusType}}</button>
    </div>
    <p *ngIf="curStatusType == 'Đã huỷ'">
      <span style="font-weight: bold;">Lý do huỷ đơn hàng:</span> {{orderDetail.Reason}}
    </p>
  </div>
</div>
